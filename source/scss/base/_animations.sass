/* ==========================================================================
   Animations
   ========================================================================== */

$base-animation: 300ms
$animation-increment: 250ms
$extra-delay: $base-animation + ($animation-increment * 5)

// Animation properties
$duration:        0.25s
$timing-function: ease('material')
$delay:           0s
$iteration-count: infinite
$direction:       normal
$fill-mode:       both
$play-state:      running

// Animation mixin
=animation($name, $duration: $duration, $timing-function: $timing-function, $delay: $delay, $iteration-count: $iteration-count, $direction: $direction, $fill-mode: $fill-mode, $play-state: $play-state)
  animation-name: $name
  animation-duration: $duration
  animation-timing-function: $timing-function
  animation-delay: $delay
  animation-iteration-count: $iteration-count
  animation-direction: $direction
  animation-fill-mode: $fill-mode
  animation-play-state: $play-state

// General Animations
@keyframes fade-in
  0%
    opacity: 0
  100%
    opacity: 1

@keyframes fade-out
  0%
    opacity: 1
  100%
    opacity: 0

@keyframes fade-in-up
  0%
    opacity: 0
    transform: translateY(20px)
  100%
    opacity: 1
    transform: none

@keyframes fade-in-down
  0%
    opacity: 0
    transform: translateY(-20px)
  100%
    opacity: 1
    transform: none

@keyframes fade-in-left
  0%
    opacity: 0
    transform: translateX(20px)
  100%
    opacity: 1
    transform: none

@keyframes fade-in-right
  0%
    opacity: 0
    transform: translateX(-20px)
  100%
    opacity: 1
    transform: none

@keyframes fade-out-up
  0%
    opacity: 1
    transform: none
  100%
    opacity: 0
    transform: translateY(-20px)

@keyframes fade-out-down
  0%
    opacity: 1
    transform: none
  100%
    opacity: 0
    transform: translateY(20px)

// Mixins
=fade-in
  @include animation('fade-in', $duration: 0.75s, $iteration-count: 1)

=fade-out
  @include animation('fade-out', $duration: 0.75s, $iteration-count: 1)

=fade-in-up
  @include animation('fade-in-up', $duration: $base-animation + ($animation-increment * 1), $iteration-count: 1)

=fade-in-down
  @include animation('fade-in-down', $duration: $base-animation + ($animation-increment * 1), $iteration-count: 1)

=fade-in-left
  @include animation('fade-in-left', $duration: $base-animation + ($animation-increment * 1), $iteration-count: 1)

=fade-in-right
  @include animation('fade-in-right', $duration: $base-animation + ($animation-increment * 1), $iteration-count: 1)

=fade-out-up
  @include animation('fade-out-up', $duration: $base-animation + ($animation-increment * 1), $iteration-count: 1)

=fade-out-down
  @include animation('fade-out-down', $duration: $base-animation + ($animation-increment * 1), $iteration-count: 1)

// Classes
.fade-in
  +fade-in

.fade-out
  +fade-out

.fade-in-up
  +fade-in-up
  &.delayed
    animation-delay: 1000ms

.fade-in-down
  +fade-in-down

.fade-out-up
  +fade-out-up

.fade-out-down
  +fade-out-down


.header
  &--case-study
    .header
      &__title,
      &__subtitle,
      &__service,
      &__project-link
        opacity: 0
        +fade-in-up

      &__title
        animation-delay: 150ms * 1
      &__subtitle
        animation-delay: 150ms * 2
      &__service,
      &__project-link
        @for $i from 1 through 3
          &:nth-child(#{$i})
            animation-delay: 150ms * (2 + $i)

      &__back-home
        opacity: 0
        +fade-in-down
        animation-delay: 150ms * 6

.section--intro
  .chapter
    &__images .image,
    &__body
      opacity: 0
      +fade-in-up

    &__images .image
      animation-delay: 150ms * 9

    &__body
      animation-delay: 150ms * 10

.section:not(.section--intro)
  .section,
  .chapter
    &__title,
    &__body,
    &__body-list,
    &__cta,
    &__images .image,
    &__background-images
      opacity: 0

.section--custom-animation,
.section__phases__phase .background-images__image
  opacity: 0

.inview
  &.section--custom-animation
    +fade-in

  .section,
  .chapter
    &__title,
    &__body,
    &__body-list,
    &__cta,
    &__images .image
      +fade-in-up

    &__background-images
      +fade-in

    &__title
      animation-delay: $base-animation * 1
    &__images .image
      @for $i from 1 through 3
        &:nth-child(#{$i})
          animation-delay: $base-animation * (2 + ($i - 1))

    &__body,
    &__body-list
      animation-delay: $base-animation * 3

    &__cta
      @for $i from 1 through 2
        &:nth-child(#{$i})
          animation-delay: $base-animation * (4 + ($i - 1))

    &__body-list--nested
      animation-delay: 0ms

  &.section__phases__phase
    .background-images__image
      +fade-in-up

      @for $i from 1 through 3
        &:nth-child(#{$i})
          animation-delay: ($base-animation * $i) + ($base-animation * 3)

.fade-enter-active,
.fade-leave-active
  transition: opacity $base-animation + ($animation-increment * 1)

.fade-enter-active
  transition-delay: $base-animation + ($animation-increment * 1)

.fade-enter,
.fade-leave-to
  opacity: 0

.hero-intro-animation,
.header-main-animation,
.case-study-transition
  &-enter-active,
  &-leave-active
    transition: all 2s

.hero-intro-animation
  &-enter-active
    .hero__title,
    .hero__subtitle
      +fade-in-up

    .hero__title
      animation-delay: $base-animation

    .hero__subtitle
      animation-delay: $base-animation + ($animation-increment * 1)

  &-leave-active
    .hero__title,
    .hero__subtitle
      +fade-out-up

    .hero__title
      animation-delay: $base-animation

    .hero__subtitle
      animation-delay: $base-animation + ($animation-increment * 1)

.header-main-animation
  &-enter-active
    .header__logo,
    .header__tagline
      +fade-in-up

    .header__logo
      animation-delay: $base-animation + ($animation-increment * 3)

    .header__tagline
      animation-delay: $base-animation + ($animation-increment * 4)

  &-leave-active
    .header__logo,
    .header__tagline
      +fade-out-up

    .header__logo
      animation-delay: $base-animation + ($animation-increment * 4)
    .header__tagline
      animation-delay: $base-animation + ($animation-increment * 3)

    ~ .hero-intro-animation
        &-enter-active
          .hero__title
            animation-delay: $base-animation + $extra-delay

          .hero__subtitle
            animation-delay: $base-animation + ($animation-increment * 1) + $extra-delay

.case-study-transition
  &-enter-active
    .background-images__image,
    .background-images__image--offset::after,
    .case-study__title,
    .case-study__subtitle,
    .case-study__cta
      +fade-in-up

    .background-images__image
      animation-delay: $base-animation + ($animation-increment * 1) + $extra-delay

    .background-images__image--offset
      animation: none

    .background-images__image--offset::after
      animation-delay: $base-animation + $extra-delay

    .case-study__title
      animation-delay: $base-animation + ($animation-increment * 2) + $extra-delay

    .case-study__subtitle
      animation-delay: $base-animation + ($animation-increment * 3) + $extra-delay

    .case-study__cta
      animation-delay: $base-animation + ($animation-increment * 4) + $extra-delay

.case-study-transition
  &-leave-active
    .background-images__image,
    .background-images__image--offset::after,
    .case-study__title,
    .case-study__subtitle,
    .case-study__cta
      +fade-out-up

    .background-images__image
      animation-delay: $base-animation + ($animation-increment * 3)

    .background-images__image--offset
      animation: none

    .background-images__image--offset::after
      animation-delay: $base-animation + ($animation-increment * 4)

    .case-study__title
      animation-delay: $base-animation

    .case-study__subtitle
      animation-delay: $base-animation + ($animation-increment * 1)

    .case-study__cta
      animation-delay: $base-animation + ($animation-increment * 2)
